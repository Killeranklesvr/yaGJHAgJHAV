local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer
local camera = workspace.CurrentCamera

local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "KillerHubUI"
gui.ResetOnSpawn = false

-- Main draggable frame
local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0, 600, 0, 400)
mainFrame.Position = UDim2.new(0.5, -300, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 8)

-- Sidebar
local sidebar = Instance.new("Frame", mainFrame)
sidebar.Size = UDim2.new(0, 120, 1, 0)
sidebar.Position = UDim2.new(0, 0, 0, 0)
sidebar.BackgroundColor3 = Color3.fromRGB(15, 15, 15)

-- Content area
local contentFrame = Instance.new("Frame", mainFrame)
contentFrame.Position = UDim2.new(0, 120, 0, 0)
contentFrame.Size = UDim2.new(1, -120, 1, 0)
contentFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)

-- Title
local titleLabel = Instance.new("TextLabel", mainFrame)
titleLabel.Position = UDim2.new(0, 10, 0, 5)
titleLabel.Size = UDim2.new(0, 200, 0, 25)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Killer Hub"
titleLabel.TextColor3 = Color3.fromRGB(170, 0, 255)
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextSize = 16
titleLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Version
local versionLabel = Instance.new("TextLabel", mainFrame)
versionLabel.Position = UDim2.new(1, -100, 0, 5)
versionLabel.Size = UDim2.new(0, 70, 0, 25)
versionLabel.BackgroundTransparency = 1
versionLabel.Text = "v1.0.0"
versionLabel.TextColor3 = Color3.fromRGB(170, 0, 255)
versionLabel.Font = Enum.Font.GothamBold
versionLabel.TextSize = 14
versionLabel.TextXAlignment = Enum.TextXAlignment.Right

-- Sections
local sectionNames = {"Main", "Auto Farm", "Items", "Teleports", "Misc", "Webhook", "Visuals", "Configs"}
local sectionFrames = {}

for i, name in ipairs(sectionNames) do
	local button = Instance.new("TextButton", sidebar)
	button.Size = UDim2.new(1, 0, 0, 30)
	button.Position = UDim2.new(0, 0, 0, 45 + (i - 1) * 32)
	button.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	button.Text = name
	button.TextColor3 = Color3.fromRGB(170, 0, 255)
	button.Font = Enum.Font.GothamBold
	button.TextSize = 12
	button.BorderSizePixel = 0

	local section = Instance.new("Frame", contentFrame)
	section.Size = UDim2.new(1, 0, 1, 0)
	section.Visible = false
	section.BackgroundColor3 = Color3.fromRGB(10, 10, 10)

	local label = Instance.new("TextLabel", section)
	label.Size = UDim2.new(1, 0, 0, 40)
	label.Position = UDim2.new(0, 0, 0, 10)
	label.BackgroundTransparency = 1
	label.Text = name .. " Section"
	label.TextColor3 = Color3.fromRGB(170, 0, 255)
	label.Font = Enum.Font.GothamBold
	label.TextSize = 20

	sectionFrames[name] = section

	button.MouseButton1Click:Connect(function()
		for sec, frame in pairs(sectionFrames) do
			frame.Visible = (sec == name)
		end
	end)
end
sectionFrames["Main"].Visible = true

-- Close Button
local closeButton = Instance.new("TextButton", mainFrame)
closeButton.Size = UDim2.new(0, 25, 0, 25)
closeButton.Position = UDim2.new(1, -30, 0, 5)
closeButton.BackgroundTransparency = 1
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(170, 0, 255)
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 16
closeButton.MouseButton1Click:Connect(function()
	mainFrame.Visible = false
end)

-- Toggle GUI with Right Ctrl
UIS.InputBegan:Connect(function(input, gpe)
	if gpe then return end
	if input.KeyCode == Enum.KeyCode.RightControl then
		mainFrame.Visible = not mainFrame.Visible
	end
end)

------------------------------------------------
-- AIMBOT SECTION
------------------------------------------------
local aimbotEnabled = false
local rightClickHeld = false

-- Toggle button for Aimbot
local aimbotButton = Instance.new("TextButton", sectionFrames["Main"])
aimbotButton.Size = UDim2.new(0, 120, 0, 40)
aimbotButton.Position = UDim2.new(0, 20, 0, 80)
aimbotButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
aimbotButton.TextColor3 = Color3.fromRGB(170, 0, 255)
aimbotButton.Font = Enum.Font.GothamBold
aimbotButton.TextSize = 14
aimbotButton.Text = "Aimbot: OFF"

aimbotButton.MouseButton1Click:Connect(function()
	aimbotEnabled = not aimbotEnabled
	aimbotButton.Text = "Aimbot: " .. (aimbotEnabled and "ON" or "OFF")
end)

-- Function to get nearest player head
local function getNearestPlayer()
	local closestPlayer, closestDist = nil, math.huge
	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character and plr.Character:FindFirstChild("Head") then
			local head = plr.Character.Head
			local pos, visible = camera:WorldToViewportPoint(head.Position)
			if visible then
				local dist = (head.Position - camera.CFrame.Position).Magnitude
				if dist < closestDist then
					closestDist = dist
					closestPlayer = head
				end
			end
		end
	end
	return closestPlayer
end

-- Detect right mouse
UIS.InputBegan:Connect(function(input, gpe)
	if gpe then return end
	if input.UserInputType == Enum.UserInputType.MouseButton2 then -- Right click
		rightClickHeld = true
	end
end)
UIS.InputEnded:Connect(function(input, gpe)
	if input.UserInputType == Enum.UserInputType.MouseButton2 then
		rightClickHeld = false
	end
end)

-- Update loop
RunService.RenderStepped:Connect(function()
	if aimbotEnabled and rightClickHeld then
		local target = getNearestPlayer()
		if target then
			camera.CFrame = CFrame.new(camera.CFrame.Position, target.Position)
		end
	end
end)
